
<div style="background: #f3f3f3">
	<%- include("./shared/header") %>
	<div id="fh5co-wrapper">
		<div id="fh5co-page">
		<div class="wrap">
			<div class="container">
				<div >
					<form action="/hotels/all" method="GET" class="form-inline text-center">
						<div class="form-group" style="display: flex; align-items: center; height: 100%; margin-top: 40px;">
							<input style="padding: 28px; line-height: 30px; flex: 1; margin-right: 12px;" type="text" name="name" class="form-control" placeholder="Tìm khách sạn theo tên" value="<%= typeof name !== 'undefined' ? name : '' %>">
							<button type="submit" class="btn btn-primary">Tìm kiếm</button>
						</div>
					</form>
				</div>

				<div id="availability">
					
					<form style="display: flex; justify-content: space-evenly; align-items: center" id="hotelForm" action="" method="GET">
						<div class="a-col" style="display: flex; justify-content: center; align-items: center; margin-top: 15px;">
							<select class="form-select" name="hotelId" id="hotelSelect" style="border-radius: 0;font-size: 15px; margin-top: 5px; width: 100%; height: 40px; padding: 0 10px;">
							  <option value="" disabled selected>Chọn khách sạn</option>
							  <% for (let hotel of hotels) { %>
								<% if (hotel.isActive) { %>
								  <option value="<%= hotel._id %>"><%= hotel.name %></option>
								<% } %>
							  <% } %>
							</select>
						</div>
					  
						<div class="a-col alternate" style="display: flex; justify-content: center; align-items: center; margin-bottom: 15px;">
						  <div class="input-field" style="width: 100%;">
							<label for="date-start">Ngày nhận phòng</label>
							<input type="date" name="ngaydau" class="form-control" id="date-start" style="font-size: 15px; width: 100%; height: 40px; padding: 0 10px;"/>
						  </div>
						</div>
					  
						<div class="a-col alternate" style="display: flex; justify-content: center; align-items: center; margin-bottom: 15px;">
						  <div class="input-field" style="width: 100%;">
							<label for="date-end">Ngày trả phòng</label>
							<input type="date" name="ngayket" class="form-control" id="date-end" style="font-size: 15px; width: 100%; height: 40px; padding: 0 10px;"/>
						  </div>
						</div>
					  
						<button type="submit" id="submitButton" class="styled-button" disabled style="border-radius: 0; width: 200px; height: 40px; font-size: 16px; cursor: pointer; text-align: center;display: flex
						; justify-content: center; align-items: center; margin-top: 20px;"> <span class="button-text">Tìm kiếm</span> </button>
					  </form>
					  
					
				</div>

				<div>
					<p id="dateWarning" style="color: rgb(10, 43, 226); font-weight: bold; font-size: 14px; display: none; margin-top: 20px;">
						Vui lòng chọn khách sạn, ngày check-in và check-out.
					</p>
				</div>
			</div>
		</div>
		
		<div id="fh5co-counter-section" class="fh5co-counters">
			<div class="container">
				<div class="row">
					<div class="col-md-3 text-center">
						<span class="fh5co-counter js-counter" data-from="0" data-to="20356" data-speed="5000" data-refresh-interval="50">20356</span>
						<span class="fh5co-counter-label fw-semibold">Lượt truy cập</span>
					</div>
					<div class="col-md-3 text-center">
						<span class="fh5co-counter js-counter" data-from="0" data-to="15501" data-speed="5000" data-refresh-interval="50">15501</span>
						<span class="fh5co-counter-label fw-semibold">Khách sạn</span>
					</div>
					<div class="col-md-3 text-center">
						<span class="fh5co-counter js-counter" data-from="0" data-to="8200" data-speed="5000" data-refresh-interval="50">8200</span>
						<span class="fh5co-counter-label fw-semibold">Giao dịch</span>
					</div>
					<div class="col-md-3 text-center">
						<span class="fh5co-counter js-counter" data-from="0" data-to="8763" data-speed="5000" data-refresh-interval="50">8763</span>
						<span class="fh5co-counter-label fw-semibold">Đánh giá &amp; Phản hồi</span>
					</div>
				</div>
			</div>
		</div>

		<div id="featured-province" class="">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<div class="section-title text-center">
							<h2>Chọn thành phố</h2>
						</div>
					</div>
				</div>
		
				<div class="row">
    <% cities.forEach((city, index) => { %>
        <div class="col-md-3">
            <a href="/hotels/<%= city._id %>" style="display: block; margin-bottom: 28px;">
                <div class="f-city" style="width: 100%; height: 100%;">
                    <div class="image" style="background-image: url('<%= city.image %>'); height: 120px; background-size: cover; background-position: center; border-radius: 21px;">
                    </div>
                </div>
                <div class="descrip text-center">
                    <h3 style="color: rgb(112, 92, 92); border:  padding: 0; padding-top: 5px;; display: inline-block; font-family: 'Roboto', sans-serif; font-weight: 700; line-height: 1.2; margin: 0;">
                        <%= city.name %>
                    </h3>
                </div>
            </a>
        </div>
        <% if ((index + 1) % 4 === 0) { %>
            </div><div class="row">
        <% } %>
    <% }); %>
</div>	
			</div>
		</div>
		
	
		<div id="featured-hotel" class="fh5co-bg-color">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<div class="section-title text-center">
							<h2>Khách sạn nổi bật</h2>
						</div>
					</div>
				</div>
		
				<div class="row">
					<div class="feature-full-1col" >
						<div class="image" style="background-image: url('<%=hotels[0].image%>');">
							<div class="descrip text-center">
								<p><small>Giá chỉ từ</small><span><%=getPriceOfHotel(hotels[0])%>/đêm</span></p>
							</div>
						</div>
						<div class="desc">
							<h3><%=hotels[0].name%></h3>
							<p><%=hotels[0].description%></p>
							<p><a href="/hotel/<%=hotels[0]._id%>/room" class="btn btn-primary btn-luxe-primary">Xem chi tiết <i class="ti-angle-right"></i></a></p>
						</div>
	
					</div>
		
					<div class="feature-full-2col">
						<div class="f-hotel">
							<div class="image" style="background-image: url('<%=hotels[1].image%>');">
								<div class="descrip text-center">
									<p><small>Giá chỉ từ</small><span><%=getPriceOfHotel(hotels[1])%>/đêm</span></p>
								</div>
							</div>
							<div class="desc">
								<h3><%=hotels[1].name%></h3>
								<p><%=hotels[1].description%></p>
								<p><a href="/hotel/<%=hotels[1]._id%>/room" class="btn btn-primary btn-luxe-primary">Xem chi tiết <i class="ti-angle-right"></i></a></p>
							</div>
						</div>
						<div class="f-hotel">
							<div class="image" style="background-image: url('<%=hotels[2].image%>');">
								<div class="descrip text-center">
									<p><small>Giá chỉ từ</small><span><%=getPriceOfHotel(hotels[2])%>/đêm</span></p>
								</div>
							</div>
							<div class="desc">
								<h3><%=hotels[2].name%></h3>
								<p><%=hotels[2].description%></p>
								<p><a href="/hotel/<%=hotels[2]._id%>/room" class="btn btn-primary btn-luxe-primary">Xem chi tiết <i class="ti-angle-right"></i></a></p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	
		<!-- <div id="hotel-facilities">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<div class="section-title text-center">
							<h2>Hotel Facilities</h2>
						</div>
					</div>
				</div>
	
				<div id="tabs">
					<nav class="tabs-nav">
						<a  class="active" data-tab="tab1">
							<i class="bi bi-box2-heart"></i>
							<span>Restaurant</span>
						</a>
						<a  class="active" data-tab="tab2">
							<i class="bi bi-heart-fill"></i>
							<span>Bar</span>
						</a>
						<a  class="active" data-tab="tab3">
							<i class="bi bi-gear-fill"></i>
							<span>Pick-up</span>
						</a>
						<a class="active" data-tab="tab4">
							<i class="bi bi-life-preserver"></i>
							<span>Swimming Pool</span>
						</a>
						<a  class="active" data-tab="tab5">
							<i class="bi bi-emoji-laughing"></i>
							<span>Spa</span>
						</a>
						<a  class="active" data-tab="tab6">
							<i class="bi bi-heptagon-fill"></i>
							<span>Gym</span>
						</a>
					</nav>
				</div>
			</div>
		</div>
		 -->
	
		<footer id="footer" class="fh5co-bg-color">
			<div class="container">
				<div class="row">
					<div class="col-md-3">
						<div class="copyright">
							<p><small>&copy; Xây dựng năm 2024 <br> KHÁCH SẠN TA<br></small></p>
						</div>
					</div>
					<div class="col-md-6">
						<div class="row">
							<div class="col-md-3">
								<h3>Trang liên quan</h3>
								<ul class="link">
									<li><a href="home">Home</a></li>
									<li><a href="room">Room</a></li>
									<li><a href="hotel">Hotels</a></li>
									<li><a href="contact">Contact</a></li>
									<li><a href="blog">Blog</a></li>
								</ul>
							</div>
							<div class="col-md-3">
								<h3>Các dịch vụ</h3>
								<ul class="link">
									<li><a href="#">Wifi</a></li>
									<li><a href="#">Tivi màn hình phẳng</a></li>
									<li><a href="#">Hồ bơi</a></li>
									<li><a href="#">Bồn tắm lớn</a></li>
									<li><a href="#">Gym</a></li>
								</ul>
							</div>
							<div class="col-md-6">
								<h3>Đăng ký tài khoản </h3>
								<p>Nhanh tay đăng ký tài khoản để đặt phòng khách sạn </p>

							</div>
						</div>
					</div>
					<div class="col-md-3">
						<ul class="social-icons">
							<li>
								<a href="#"><i class="icon-twitter-with-circle"></i></a>
								<a href="#"><i class="icon-facebook-with-circle"></i></a>
								<a href="#"><i class="icon-instagram-with-circle"></i></a>
								<a href="#"><i class="icon-linkedin-with-circle"></i></a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</footer>
	
		</div>
		<!-- END fh5co-page -->
	
	</div>
</div>
<script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
<df-messenger
  intent="WELCOME"
  chat-title="Hotel Assistant"
  agent-id="96d5f0df-a598-45a1-add4-1b3c988d6361"
  language-code="vi"
></df-messenger>

<style>
	.f-hotel {
    transition: transform 0.3s ease, box-shadow 0.3s ease; /* Hiệu ứng chuyển đổi */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Bóng đổ nhẹ */
    border-radius: 8px; /* Làm tròn góc */
    overflow: hidden; /* Ẩn phần thừa */
    margin: 15px; /* Khoảng cách giữa các khách sạn */
  }

  .f-hotel:hover {
    transform: translateY(-5px); /* Di chuyển lên khi hover */
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2); /* Tăng cường bóng đổ khi hover */
  }

  .image {
    height: 300px; /* Chiều cao cố định cho hình ảnh */
    background-size: cover; /* Tự động điều chỉnh kích thước hình ảnh */
    background-position: center; /* Căn giữa hình ảnh */
  }

  .desc {
    padding: 15px; /* Khoảng cách cho phần mô tả */
    text-align: center; /* Căn giữa text */
  }

  .btn-luxe-primary {
    transition: background-color 0.3s ease, color 0.3s ease; /* Hiệu ứng chuyển màu cho nút */
  }

  .btn-luxe-primary:hover {
    background-color: #ff6f61; /* Màu nền khi hover */
    color: white; /* Màu chữ khi hover */
  }
	.image {
    transition: transform 0.3s ease, opacity 0.3s ease;
}

a:hover .image {
    transform: scale(1.05);
    opacity: 0.8;
}
    /* CSS cho nút */
    .styled-button {
        background-color: #007bff; /* Màu nền xanh */
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        color: white;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s, transform 0.2s;
    }

    /* CSS cho span bên trong nút */
    .button-text {
        display: inline-block;
        font-weight: bold;
    }

    /* Hiệu ứng hover cho nút */
    .styled-button:hover:not(:disabled) {
        background-color: #0056b3; /* Màu nền đậm hơn khi hover */
        transform: scale(1.05); /* Phóng to nhẹ khi hover */
    }

    /* CSS khi nút bị vô hiệu hóa */
    .styled-button:disabled {
        background-color: #383232; /* Màu xám khi bị vô hiệu hóa */
        cursor: not-allowed;
    }
</style>

<script>
    // Lấy các phần tử input, nút submit, thông báo và select
    const dateStart = document.getElementById('date-start');
    const dateEnd = document.getElementById('date-end');
    const submitButton = document.getElementById('submitButton');
    const dateWarning = document.getElementById('dateWarning');
    const hotelSelect = document.getElementById('hotelSelect');
    const hotelForm = document.getElementById('hotelForm');
	const today = new Date().toISOString().split('T')[0]; // Lấy ngày hiện tại (YYYY-MM-DD)

    // Đặt giá trị min cho ngày check-in là ngày hiện tại
    dateStart.min = today;

   

    // Hàm kiểm tra và cập nhật trạng thái của nút và thông báo
    function validateDates() {
        if (dateStart.value && dateEnd.value) {
            // Kiểm tra nếu ngày check-out không nhỏ hơn ngày check-in
            if (new Date(dateEnd.value) >= new Date(dateStart.value)) {
                submitButton.disabled = false;
                dateWarning.style.display = 'none'; // Ẩn thông báo nếu ngày hợp lệ
            } else {
                submitButton.disabled = true;
                dateWarning.style.display = 'block'; // Hiện thông báo nếu ngày không hợp lệ
                dateWarning.textContent = 'Ngày check-out phải bằng hoặc sau ngày check-in.'; // Thông báo lỗi cụ thể
            }
        } else {
            submitButton.disabled = true;
            dateWarning.style.display = 'block'; // Hiện thông báo nếu chưa chọn ngày
            dateWarning.textContent = 'Vui lòng chọn khách sạn, ngày check-in và check-out.'; // Thông báo nhắc người dùng
        }
    }

    // Hàm cập nhật action của form khi người dùng chọn một khách sạn
    function updateFormAction() {
        const selectedHotelId = hotelSelect.value;
        if (selectedHotelId) {
            hotelForm.action = `/hotel/${selectedHotelId}/room`;
        }
    }

    // Lắng nghe sự kiện 'input' trên các trường ngày
 // Khi người dùng chọn ngày check-in, cập nhật giá trị min cho ngày check-out
 dateStart.addEventListener('input', function() {
	dateEnd.min = dateStart.value; // Ngày check-out phải lớn hơn hoặc bằng ngày check-in
	validateDates();
});

// Kiểm tra tính hợp lệ của ngày và bật/tắt nút submit
dateEnd.addEventListener('input', validateDates);

    // Lắng nghe sự kiện 'change' trên select để cập nhật action của form
    hotelSelect.addEventListener('change', updateFormAction);

    // Gọi validateDates() khi trang tải để đảm bảo trạng thái chính xác ban đầu
    validateDates();
</script>